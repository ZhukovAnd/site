"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.sendFile = exports._sendAlbum = exports._fileToMedia = exports.uploadFile = exports.CustomFile = void 0;
const tl_1 = require("../tl");
const Helpers_1 = require("../Helpers");
const Utils_1 = require("../Utils");
const path_1 = __importDefault(require("path"));
const fs_1 = require("fs");
const index_1 = require("../index");
const messageParse_1 = require("./messageParse");
const messages_1 = require("./messages");
/**
 * A custom file class that mimics the browser's File class.<br/>
 * You should use this whenever you want to upload a file.
 */
class CustomFile {
    constructor(name, size, path, buffer) {
        this.name = name;
        this.size = size;
        this.path = path;
        this.buffer = buffer;
    }
}
exports.CustomFile = CustomFile;
const KB_TO_BYTES = 1024;
const LARGE_FILE_THRESHOLD = 10 * 1024 * 1024;
const UPLOAD_TIMEOUT = 15 * 1000;
const DISCONNECT_SLEEP = 1000;
/** @hidden */
async function uploadFile(client, fileParams) {
    const { file, onProgress } = fileParams;
    let { workers } = fileParams;
    const { name, size } = file;
    const fileId = Helpers_1.readBigIntFromBuffer(Helpers_1.generateRandomBytes(8), true, true);
    const isLarge = size > LARGE_FILE_THRESHOLD;
    const partSize = Utils_1.getAppropriatedPartSize(size) * KB_TO_BYTES;
    const partCount = Math.floor((size + partSize - 1) / partSize);
    const buffer = Buffer.from(await fileToBuffer(file));
    // Make sure a new sender can be created before starting upload
    await client.getSender(client.session.dcId);
    if (!workers || !size) {
        workers = 1;
    }
    if (workers >= partCount) {
        workers = partCount;
    }
    let progress = 0;
    if (onProgress) {
        onProgress(progress);
    }
    for (let i = 0; i < partCount; i += workers) {
        const sendingParts = [];
        let end = i + workers;
        if (end > partCount) {
            end = partCount;
        }
        for (let j = i; j < end; j++) {
            const bytes = buffer.slice(j * partSize, (j + 1) * partSize);
            // eslint-disable-next-line no-loop-func
            sendingParts.push((async (jMemo, bytesMemo) => {
                while (true) {
                    let sender;
                    try {
                        // We always upload from the DC we are in
                        sender = await client.getSender(client.session.dcId);
                        await sender.send(isLarge
                            ? new tl_1.Api.upload.SaveBigFilePart({
                                fileId,
                                filePart: jMemo,
                                fileTotalParts: partCount,
                                bytes: bytesMemo,
                            })
                            : new tl_1.Api.upload.SaveFilePart({
                                fileId,
                                filePart: jMemo,
                                bytes: bytesMemo,
                            }));
                    }
                    catch (err) {
                        if (sender && !sender.isConnected()) {
                            await Helpers_1.sleep(DISCONNECT_SLEEP);
                            continue;
                        }
                        else if (err instanceof index_1.errors.FloodWaitError) {
                            await Helpers_1.sleep(err.seconds * 1000);
                            continue;
                        }
                        throw err;
                    }
                    if (onProgress) {
                        if (onProgress.isCanceled) {
                            throw new Error("USER_CANCELED");
                        }
                        progress += 1 / partCount;
                        onProgress(progress);
                    }
                    break;
                }
            })(j, bytes));
        }
        await Promise.all(sendingParts);
    }
    return isLarge
        ? new tl_1.Api.InputFileBig({
            id: fileId,
            parts: partCount,
            name,
        })
        : new tl_1.Api.InputFile({
            id: fileId,
            parts: partCount,
            name,
            md5Checksum: "", // This is not a "flag", so not sure if we can make it optional.
        });
}
exports.uploadFile = uploadFile;
/** @hidden */
async function _fileToMedia(client, { file, forceDocument, fileSize, progressCallback, attributes, thumb, voiceNote = false, videoNote = false, supportsStreaming = false, mimeType, asImage, workers = 1, }) {
    if (!file) {
        return { fileHandle: undefined, media: undefined, image: undefined };
    }
    const isImage = index_1.utils.isImage(file);
    if (asImage == undefined) {
        asImage = isImage && !forceDocument;
    }
    if (typeof file == "object" &&
        !Buffer.isBuffer(file) &&
        !(file instanceof tl_1.Api.InputFile) &&
        !(file instanceof tl_1.Api.InputFileBig) &&
        !(file instanceof CustomFile) &&
        !("read" in file)) {
        try {
            return {
                fileHandle: undefined,
                media: index_1.utils.getInputMedia(file, {
                    isPhoto: asImage,
                    attributes: attributes,
                    forceDocument: forceDocument,
                    voiceNote: voiceNote,
                    videoNote: videoNote,
                    supportsStreaming: supportsStreaming,
                }),
                image: asImage,
            };
        }
        catch (e) {
            return {
                fileHandle: undefined,
                media: undefined,
                image: isImage,
            };
        }
    }
    let media;
    let fileHandle;
    let createdFile;
    if (file instanceof tl_1.Api.InputFile || file instanceof tl_1.Api.InputFileBig) {
        fileHandle = file;
    }
    else if (typeof file == "string" &&
        (file.startsWith("https://") || file.startsWith("http://"))) {
        if (asImage) {
            media = new tl_1.Api.InputMediaPhotoExternal({ url: file });
        }
        else {
            media = new tl_1.Api.InputMediaDocumentExternal({ url: file });
        }
    }
    else if (!(typeof file == "string") || (await fs_1.promises.lstat(file)).isFile()) {
        if (typeof file == "string") {
            createdFile = new CustomFile(path_1.default.basename(file), (await fs_1.promises.stat(file)).size, file);
        }
        else if ((typeof File !== "undefined" && file instanceof File) ||
            file instanceof CustomFile) {
            createdFile = file;
        }
        else {
            let name;
            if ("name" in file) {
                // @ts-ignore
                name = file.name;
            }
            else {
                name = "unnamed";
            }
            if (file instanceof Buffer) {
                createdFile = new CustomFile(name, file.length, "", file);
            }
        }
        if (!createdFile) {
            throw new Error(`Could not create file from ${JSON.stringify(file)}`);
        }
        fileHandle = await uploadFile(client, {
            file: createdFile,
            onProgress: progressCallback,
            workers: workers,
        });
    }
    else {
        throw new Error(`"Not a valid path nor a url ${file}`);
    }
    if (media != undefined) {
    }
    else if (fileHandle == undefined) {
        throw new Error(`Failed to convert ${file} to media. Not an existing file or an HTTP URL`);
    }
    else if (asImage) {
        media = new tl_1.Api.InputMediaUploadedPhoto({
            file: fileHandle,
        });
    }
    else {
        // @ts-ignore
        let res = index_1.utils.getAttributes(file, {
            mimeType: mimeType,
            attributes: attributes,
            forceDocument: forceDocument && !isImage,
            voiceNote: voiceNote,
            videoNote: videoNote,
            supportsStreaming: supportsStreaming,
            thumb: thumb,
        });
        attributes = res.attrs;
        mimeType = res.mimeType;
        let uploadedThumb;
        if (!thumb) {
            uploadedThumb = undefined;
        }
        else {
            // todo refactor
            if (typeof thumb == "string") {
                uploadedThumb = new CustomFile(path_1.default.basename(thumb), (await fs_1.promises.stat(thumb)).size, thumb);
            }
            else if (typeof File !== "undefined" && thumb instanceof File) {
                uploadedThumb = thumb;
            }
            else {
                let name;
                if ("name" in thumb) {
                    name = thumb.name;
                }
                else {
                    name = "unnamed";
                }
                if (thumb instanceof Buffer) {
                    uploadedThumb = new CustomFile(name, thumb.length, "", thumb);
                }
            }
            if (!uploadedThumb) {
                throw new Error(`Could not create file from ${file}`);
            }
            uploadedThumb = await uploadFile(client, {
                file: uploadedThumb,
                workers: 1,
            });
        }
        media = new tl_1.Api.InputMediaUploadedDocument({
            file: fileHandle,
            mimeType: mimeType,
            attributes: attributes,
            thumb: uploadedThumb,
            forceFile: forceDocument && !isImage,
        });
    }
    return {
        fileHandle: fileHandle,
        media: media,
        image: asImage,
    };
}
exports._fileToMedia = _fileToMedia;
/** @hidden */
async function _sendAlbum(client, entity, { file, caption, forceDocument = false, fileSize, clearDraft = false, progressCallback, replyTo, attributes, thumb, parseMode, voiceNote = false, videoNote = false, silent, supportsStreaming = false, scheduleDate, workers = 1, noforwards, commentTo, }) {
    entity = await client.getInputEntity(entity);
    let files = [];
    if (!Array.isArray(file)) {
        files = [file];
    }
    else {
        files = file;
    }
    if (!Array.isArray(caption)) {
        if (!caption) {
            caption = "";
        }
        caption = [caption];
    }
    const captions = [];
    for (const c of caption) {
        captions.push(await messageParse_1._parseMessageText(client, c, parseMode));
    }
    if (commentTo != undefined) {
        const discussionData = await messages_1.getCommentData(client, entity, commentTo);
        entity = discussionData.entity;
        replyTo = discussionData.replyTo;
    }
    else {
        replyTo = index_1.utils.getMessageId(replyTo);
    }
    const albumFiles = [];
    for (const file of files) {
        let { fileHandle, media, image } = await _fileToMedia(client, {
            file: file,
            forceDocument: forceDocument,
            fileSize: fileSize,
            progressCallback: progressCallback,
            attributes: attributes,
            thumb: thumb,
            voiceNote: voiceNote,
            videoNote: videoNote,
            supportsStreaming: supportsStreaming,
            workers: workers,
        });
        if (media instanceof tl_1.Api.InputMediaUploadedPhoto ||
            media instanceof tl_1.Api.InputMediaPhotoExternal) {
            const r = await client.invoke(new tl_1.Api.messages.UploadMedia({
                peer: entity,
                media,
            }));
            if (r instanceof tl_1.Api.MessageMediaPhoto) {
                media = Utils_1.getInputMedia(r.photo);
            }
        }
        else if (media instanceof tl_1.Api.InputMediaUploadedDocument) {
            const r = await client.invoke(new tl_1.Api.messages.UploadMedia({
                peer: entity,
                media,
            }));
            if (r instanceof tl_1.Api.MessageMediaDocument) {
                media = Utils_1.getInputMedia(r.document);
            }
        }
        let text = "";
        let msgEntities = [];
        if (captions.length) {
            [text, msgEntities] = captions.shift();
        }
        albumFiles.push(new tl_1.Api.InputSingleMedia({
            media: media,
            message: text,
            entities: msgEntities,
        }));
    }
    const result = await client.invoke(new tl_1.Api.messages.SendMultiMedia({
        peer: entity,
        replyToMsgId: replyTo,
        multiMedia: albumFiles,
        silent: silent,
        scheduleDate: scheduleDate,
        clearDraft: clearDraft,
        noforwards: noforwards,
    }));
    const randomIds = albumFiles.map((m) => m.randomId);
    return client._getResponseMessage(randomIds, result, entity);
}
exports._sendAlbum = _sendAlbum;
/** @hidden */
async function sendFile(client, entity, { file, caption, forceDocument = false, fileSize, clearDraft = false, progressCallback, replyTo, attributes, thumb, parseMode, formattingEntities, voiceNote = false, videoNote = false, buttons, silent, supportsStreaming = false, scheduleDate, workers = 1, noforwards, commentTo, }) {
    if (!file) {
        throw new Error("You need to specify a file");
    }
    if (!caption) {
        caption = "";
    }
    entity = await client.getInputEntity(entity);
    if (commentTo != undefined) {
        const discussionData = await messages_1.getCommentData(client, entity, commentTo);
        entity = discussionData.entity;
        replyTo = discussionData.replyTo;
    }
    else {
        replyTo = index_1.utils.getMessageId(replyTo);
    }
    if (Array.isArray(file)) {
        return await _sendAlbum(client, entity, {
            file: file,
            caption: caption,
            replyTo: replyTo,
            parseMode: parseMode,
            silent: silent,
            scheduleDate: scheduleDate,
            supportsStreaming: supportsStreaming,
            clearDraft: clearDraft,
            forceDocument: forceDocument,
        });
    }
    if (Array.isArray(caption)) {
        caption = caption[0] || "";
    }
    let msgEntities;
    if (formattingEntities != undefined) {
        msgEntities = formattingEntities;
    }
    else {
        [caption, msgEntities] = await messageParse_1._parseMessageText(client, caption, parseMode);
    }
    const { fileHandle, media, image } = await _fileToMedia(client, {
        file: file,
        forceDocument: forceDocument,
        fileSize: fileSize,
        progressCallback: progressCallback,
        attributes: attributes,
        thumb: thumb,
        voiceNote: voiceNote,
        videoNote: videoNote,
        supportsStreaming: supportsStreaming,
        workers: workers,
    });
    if (media == undefined) {
        throw new Error(`Cannot use ${file} as file.`);
    }
    const markup = client.buildReplyMarkup(buttons);
    const request = new tl_1.Api.messages.SendMedia({
        peer: entity,
        media: media,
        replyToMsgId: replyTo,
        message: caption,
        entities: msgEntities,
        replyMarkup: markup,
        silent: silent,
        scheduleDate: scheduleDate,
        clearDraft: clearDraft,
        noforwards: noforwards,
    });
    const result = await client.invoke(request);
    return client._getResponseMessage(request, result, entity);
}
exports.sendFile = sendFile;
function fileToBuffer(file) {
    if (typeof File !== "undefined" && file instanceof File) {
        return new Response(file).arrayBuffer();
    }
    else if (file instanceof CustomFile) {
        if (file.buffer != undefined) {
            return file.buffer;
        }
        else {
            return fs_1.promises.readFile(file.path);
        }
    }
    else {
        throw new Error("Could not create buffer from file " + file);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXBsb2Fkcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2dyYW1qcy9jbGllbnQvdXBsb2Fkcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSw4QkFBNEI7QUFHNUIsd0NBQThFO0FBQzlFLG9DQUFrRTtBQUVsRSxnREFBd0I7QUFDeEIsMkJBQW9DO0FBQ3BDLG9DQUF5QztBQUN6QyxpREFBbUQ7QUFDbkQseUNBQTRDO0FBdUI1Qzs7O0dBR0c7QUFDSCxNQUFhLFVBQVU7SUFZbkIsWUFBWSxJQUFZLEVBQUUsSUFBWSxFQUFFLElBQVksRUFBRSxNQUFlO1FBQ2pFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0lBQ3pCLENBQUM7Q0FDSjtBQWxCRCxnQ0FrQkM7QUFFRCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDekIsTUFBTSxvQkFBb0IsR0FBRyxFQUFFLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQztBQUM5QyxNQUFNLGNBQWMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDO0FBQ2pDLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0FBRTlCLGNBQWM7QUFDUCxLQUFLLFVBQVUsVUFBVSxDQUM1QixNQUFzQixFQUN0QixVQUE0QjtJQUU1QixNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxHQUFHLFVBQVUsQ0FBQztJQUN4QyxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsVUFBVSxDQUFDO0lBRTdCLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDO0lBQzVCLE1BQU0sTUFBTSxHQUFHLDhCQUFvQixDQUFDLDZCQUFtQixDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxJ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